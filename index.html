<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <title>Religionstest – Etik & Livsfrågor (5 profiler)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --maxw: 860px; --radius: 12px; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
           max-width: var(--maxw); margin: 24px auto; padding: 0 14px; line-height: 1.6; }
    h1 { margin: 0 0 6px 0; } .sub { color:#555; margin: 0 0 16px 0; }
    .card { background:#fafafa; border:1px solid #e8e8e8; border-radius: var(--radius);
            padding: 18px; margin: 14px 0; }
    .question h3 { margin: 0 0 8px 0; }
    .options { display: grid; gap:10px; margin-top: 10px; }
    .btn { width:100%; text-align:left; background:#fff; border:1px solid #ddd; border-radius:10px;
           padding:12px 14px; cursor:pointer; transition: background .15s, transform .02s; }
    .btn:hover { background:#f2f2f2; } .btn:active{ transform: scale(0.995); }
    .progress-wrap { display:flex; align-items:center; gap:10px; margin-bottom:6px; }
    .progress { flex:1; height:10px; background:#eee; border-radius:999px; overflow:hidden; }
    .progress > span { display:block; height:100%; width:0%; background:#333; transition: width .25s; }
    .muted { color:#666; }
    .result { font-weight:700; font-size:1.15rem; }
    .grid { display:grid; gap:10px; }
    .dist-row { display:grid; grid-template-columns: 28px 1fr 64px; gap:10px; align-items:center; }
    .bar { height:12px; background:#e6e6e6; border-radius:999px; overflow:hidden; }
    .bar > span { display:block; height:100%; width:0%; background:#222; transition: width .35s; }
    .pill { border:1px solid #ccc; background:#fff; border-radius:999px; padding:10px 14px; cursor:pointer; }
    .pill:hover{ background:#f5f5f5; }
    .small { font-size:.92rem; color:#555; }
  </style>
</head>
<body>
  <h1>Religionstest – Etik & Livsfrågor</h1>
  <p class="sub">Välj det alternativ som bäst stämmer med hur du skulle göra/tänka. I slutet får du en texttolkning och procentuell fördelning.</p>

  <div class="card">
    <div class="progress-wrap">
      <div class="muted" id="counter">Fråga 1/20</div>
      <div class="progress" aria-hidden="true"><span id="progress"></span></div>
    </div>
    <div id="quiz"></div>
  </div>

  <div id="resultCard" class="card" style="display:none;">
    <h2>Ditt resultat</h2>
    <p id="summary" class="result"></p>

    <h3>Fördelning</h3>
    <div class="grid" id="distribution"></div>

    <h3>Tolkning</h3>
    <div id="interpretation" class="small"></div>

    <div style="margin-top:12px; display:flex; gap:10px;">
      <button class="pill" onclick="restart()">Starta om</button>
      <button class="pill" onclick="window.scrollTo({top:0, behavior:'smooth'})">Till toppen</button>
    </div>
  </div>

  <script>
    // Profiler: A=Kristendom, B=Buddhism, C=Judendom, D=Hinduism, E=Islam
    const descriptions = {
      A: "Kristen etik: betoning på kärlek till nästan, förlåtelse och omsorg – att göra gott i praktiken.",
      B: "Buddhistisk etik: balans och icke-skadande; att inte dras med i ilska/begär och att odla sinnesro.",
      C: "Judisk etik: regler och ansvar med stark omtanke om liv och situation; gemenskap, eftertanke och samvetsprövning.",
      D: "Hinduisk etik: livet som helhetlig väg; handlingars följder över tid och inre fördjupning/stillhet.",
      E: "Islamisk etik: plikt, tydliga ramar och rättvisa; avsikt och disciplin i vardagens beslut."
    };

    // 20 frågor – alternativ kan ge poäng till flera profiler
    const questions = [
      // Etiska vardagsval
      { q: "1. Du ser en klasskompis bli retad. Vad gör du?",
        options: [
          { text: "Ingriper och står upp för personen, även om det kostar dig.", scores: ["A","E"] },
          { text: "Försöker lugna alla och stoppa skadan utan att peka ut någon.", scores: ["B","D"] },
          { text: "Söker en vuxen/regelväg och dokumenterar vad som hänt.", scores: ["C","E"] }
        ]},
      { q: "2. En vän har fuskat på provet och vill att du håller tyst.",
        options: [
          { text: "Säger ifrån – det som är fel ska rättas, men med respekt för personen.", scores: ["C","E","A"] },
          { text: "Talar med vännen privat för att minska skadan utan att eskalera.", scores: ["B","D"] }
        ]},
      { q: "3. Du hittar pengar på skolans golv.",
        options: [
          { text: "Lämnar in dem direkt.", scores: ["A","E"] },
          { text: "Frågar runt och försöker återföra till rätt person.", scores: ["C","A"] },
          { text: "Låter bli att ta dem – känner att konsekvenser fastnar vid en.", scores: ["B","D"] }
        ]},
      { q: "4. En kollega skyller på dig för något du inte gjort.",
        options: [
          { text: "Tar upp det sakligt och tydligt – rätt ska vara rätt.", scores: ["C","E"] },
          { text: "Markerar men lämnar utrymme för förlåtelse och fortsatt relation.", scores: ["A"] },
          { text: "Backar ett steg för att inte spä på konflikt, avvaktar och iakttar.", scores: ["B","D"] }
        ]},
      { q: "5. En vän ber dig ljuga för att skydda honom/henne.",
        options: [
          { text: "Avböjer – sanning och ansvar går före.", scores: ["C","E","A"] },
          { text: "Söker en utväg som minskar lidandet utan att behöva ljuga.", scores: ["B","D","A"] }
        ]},
      { q: "6. Någon glöms bort i grupparbetet.",
        options: [
          { text: "Inkluderar aktivt – alla har lika värde och ska få plats.", scores: ["A","C"] },
          { text: "Medlar så att gruppen hittar balans och ingen tappar ansiktet.", scores: ["B","D"] }
        ]},
      { q: "7. Någon tränger sig i kön.",
        options: [
          { text: "Säger till sakligt – ordningen gäller alla.", scores: ["E","C"] },
          { text: "Låter det passera och tränar tålamod.", scores: ["B","D"] },
          { text: "Pekar på beteendet men erbjuder en vänlig utväg.", scores: ["A"] }
        ]},
      { q: "8. Du erbjuds sommarjobb på ett företag med dåligt rykte.",
        options: [
          { text: "Tackar nej – integritet och rättvisa går före lön.", scores: ["A","C","E"] },
          { text: "Avstår om du ser att det skadar andra på sikt.", scores: ["D","B"] }
        ]},
      { q: "9. Du får oväntat mycket pengar.",
        options: [
          { text: "Ger en del till behövande.", scores: ["A","E"] },
          { text: "Delar med familjen och närmaste kretsen först.", scores: ["C"] },
          { text: "Använder för något långsiktigt meningsfullt.", scores: ["D"] },
          { text: "Sparar och planerar i lugn takt.", scores: ["B"] }
        ]},
      { q: "10. En regel står i vägen för vad du tycker blir mest rätt i en situation.",
        options: [
          { text: "Följer regeln – ramar behövs för rättvisa och ordning.", scores: ["E"] },
          { text: "Tolkar regeln genom omtanke om liv/situation och gör undantag vid behov.", scores: ["C","A"] },
          { text: "Söker en balanserad lösning som minimerar skada.", scores: ["B"] },
          { text: "Följer det som stämmer med en djupare mening för helheten.", scores: ["D"] }
        ]},

      // Existentiella & livsval
      { q: "11. Du går igenom en svår tid.",
        options: [
          { text: "Ser det som en prövning som kräver uthållighet och disciplin.", scores: ["E"] },
          { text: "Ser det som något att förstå och växa av.", scores: ["B"] },
          { text: "Söker tröst och mening i omtanke och gemenskap.", scores: ["A"] },
          { text: "Ser det som del av en större livsväg över tid.", scores: ["D"] },
          { text: "Rådgör, väger bud och konsekvenser, och väljer varsamt väg.", scores: ["C"] }
        ]},
      { q: "12. Någon behandlar dig illa.",
        options: [
          { text: "Markerar tydligt och söker upprättelse på rätt sätt.", scores: ["C","E"] },
          { text: "Förlåter och försöker återupprätta relationen.", scores: ["A"] },
          { text: "Tar avstånd för att undvika mer lidande och låter tiden verka.", scores: ["B","D"] }
        ]},
      { q: "13. Du ser orättvisor i världen.",
        options: [
          { text: "Agerar inom tydliga ramar för att främja rättvisa för fler.", scores: ["E","C"] },
          { text: "Gör konsekvent små goda handlingar i vardagen.", scores: ["B","A"] },
          { text: "Arbetar långsiktigt utifrån en helhetssyn.", scores: ["D"] }
        ]},
      { q: "14. Du funderar på döden.",
        options: [
          { text: "Tänker på ett kommande liv bortom detta.", scores: ["A","E"] },
          { text: "Tänker på återfödelse och cykler.", scores: ["B","D"] },
          { text: "Fokuserar främst på livet här och nu och hur vi lever det väl.", scores: ["C"] }
        ]},
      { q: "15. Vad är människans innersta natur?",
        options: [
          { text: "I grunden god men behöver vägledning och förlåtelse.", scores: ["A"] },
          { text: "Formbar – begär kan övervinnas genom träning och insikt.", scores: ["B"] },
          { text: "Bunden till ansvar och bud – behöver vägledas av lag och samvete.", scores: ["C","E"] },
          { text: "En del av något större, med en inre kärna som kan fördjupas.", scores: ["D"] }
        ]},
      { q: "16. Du ser att naturen far illa.",
        options: [
          { text: "Tar ansvar praktiskt – vi ska vårda och skydda.", scores: ["A","E"] },
          { text: "Följer regler och rättvisa kring resurser.", scores: ["C"] },
          { text: "Lever enklare för att minska lidande och begär.", scores: ["B"] },
          { text: "Visar vördnad – ser naturen som hel och sammanlänkad.", scores: ["D"] }
        ]},
      { q: "17. En släkting vill att du följer en tradition du inte känner dig hemma i.",
        options: [
          { text: "Deltar för gemenskapens skull – relationen är viktig.", scores: ["A"] },
          { text: "Deltar om du kan göra det inom tydliga ramar du kan stå för.", scores: ["E"] },
          { text: "Avstår om det strider mot din samvetsmässiga tolkning.", scores: ["C"] },
          { text: "Deltar delvis på ett sätt som känns sant och stilla för dig.", scores: ["D","B"] }
        ]},
      { q: "18. Du måste välja mellan kortsiktig lycka och långsiktig mening.",
        options: [
          { text: "Väljer mening och ansvar, även om det kostar nu.", scores: ["A","E","C","D"] },
          { text: "Väljer balans och minskat lidande här och nu.", scores: ["B"] }
        ]},
      { q: "19. Du blir sviken av en nära vän.",
        options: [
          { text: "Förlåter och försöker reparera.", scores: ["A"] },
          { text: "Söker rättvis upprättelse och tydliga ramar framåt.", scores: ["C","E"] },
          { text: "Avvaktar och låter tiden klargöra nästa steg.", scores: ["B","D"] }
        ]},
      { q: "20. Gruppen vill göra något felaktigt.",
        options: [
          { text: "Står emot, även om du blir ensam.", scores: ["E","C","A"] },
          { text: "Följer med för att passa in.", scores: [] },
          { text: "Försöker hitta en tredje väg som minskar skada och bevarar lugn.", scores: ["B","D"] }
        ]}
    ];

    let scores, current;

    function initState(){
      scores = { A:0, B:0, C:0, D:0, E:0 };
      current = 0;
      updateCounter(); updateProgress();
    }
    function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]];} return arr; }
    function updateCounter(){ document.getElementById("counter").textContent = `Fråga ${Math.min(current+1, questions.length)}/${questions.length}`; }
    function updateProgress(){ document.getElementById("progress").style.width = Math.round((current/questions.length)*100) + "%"; }

    function showQuestion(){
      if(current>=questions.length){ return showResult(); }
      const container = document.getElementById("quiz");
      container.innerHTML = "";
      const wrap = document.createElement("div");
      wrap.className = "question";
      wrap.innerHTML = `<h3>${questions[current].q}</h3>`;
      const opts = document.createElement("div"); opts.className="options";
      shuffle([...questions[current].options]).forEach(opt=>{
        const btn = document.createElement("button");
        btn.className="btn"; btn.textContent = opt.text;
        btn.onclick = ()=>{
          (opt.scores||[]).forEach(k=>{ if(scores[k]!=null) scores[k]++; });
          current++; updateCounter(); updateProgress(); showQuestion();
        };
        opts.appendChild(btn);
      });
      wrap.appendChild(opts); container.appendChild(wrap);
    }

    function showResult(){
      document.getElementById("quiz").innerHTML = `<p class="muted">Klart! Se resultatet nedan.</p>`;
      const total = Object.values(scores).reduce((a,b)=>a+b,0)||1;
      const pct = Object.fromEntries(Object.entries(scores).map(([k,v])=>[k, Math.round((v/total)*100)]));

      const maxVal = Math.max(...Object.values(scores));
      const top = Object.keys(scores).filter(k=>scores[k]===maxVal);

      // Topptext
      const labels = {A:"kristen etik",B:"buddhistisk etik",C:"judisk etik",D:"hinduisk etik",E:"islamisk etik"};
      const titleList = top.map(k=>labels[k]).join(" & ");
      document.getElementById("summary").textContent = `Du lutar mest åt: ${titleList}`;

      // Fördelningsstaplar
      const order = ["A","B","C","D","E"];
      const dist = document.getElementById("distribution"); dist.innerHTML="";
      order.forEach(k=>{
        const row = document.createElement("div"); row.className="dist-row";
        const label = document.createElement("div"); label.textContent = k;
        const bar = document.createElement("div"); bar.className="bar";
        const fill = document.createElement("span"); fill.style.width = pct[k]+"%"; bar.appendChild(fill);
        const val = document.createElement("div"); val.textContent = pct[k]+"%";
        row.appendChild(label); row.appendChild(bar); row.appendChild(val); dist.appendChild(row);
      });

      // Tolkningstext: visa alla topp + kort om övriga
      const interp = document.getElementById("interpretation");
      let lines = [];
      top.forEach(k=> lines.push(`• ${labels[k][0].toUpperCase()+labels[k].slice(1)}: ${descriptions[k]}`));
      const others = order.filter(k=>!top.includes(k)).sort((a,b)=>scores[b]-scores[a]).slice(0,2);
      if(others.length){
        lines.push("<br/>Nära profiler:");
        others.forEach(k=> lines.push(`• ${labels[k][0].toUpperCase()+labels[k].slice(1)}: ${descriptions[k]}`));
      }
      interp.innerHTML = lines.join("<br/>");

      // Visa kort
      document.getElementById("resultCard").style.display = "block";
      setTimeout(()=>document.getElementById("resultCard").scrollIntoView({behavior:"smooth"}),100);
    }

    function restart(){
      initState();
      document.getElementById("resultCard").style.display="none";
      document.getElementById("quiz").innerHTML = "";
      showQuestion(); window.scrollTo({top:0, behavior:"smooth"});
    }

    // Init
    initState(); showQuestion();
  </script>
</body>
</html>
