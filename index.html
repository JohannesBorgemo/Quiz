<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <title>Religionstest – Etik, Existens & Rit/Livsstil</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --maxw: 860px; --radius: 12px; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
           max-width: var(--maxw); margin: 24px auto; padding: 0 14px; line-height: 1.6; }
    h1 { margin: 0 0 6px 0; } .sub { color:#555; margin: 0 0 16px 0; }
    .card { background:#fafafa; border:1px solid #e8e8e8; border-radius: var(--radius);
            padding: 18px; margin: 14px 0; }
    .question h3 { margin: 0 0 8px 0; }
    .options { display: grid; gap:10px; margin-top: 10px; }
    .btn { width:100%; text-align:left; background:#fff; border:1px solid #ddd; border-radius:10px;
           padding:12px 14px; cursor:pointer; transition: background .15s, transform .02s; }
    .btn:hover { background:#f2f2f2; } .btn:active{ transform: scale(0.995); }
    .hidden-label { font-size: 0.85rem; color: #777; margin-top: 4px; display: none; }
    .show-labels .hidden-label { display: block; }
    .progress-wrap { display:flex; align-items:center; gap:10px; margin-bottom:6px; }
    .progress { flex:1; height:10px; background:#eee; border-radius:999px; overflow:hidden; }
    .progress > span { display:block; height:100%; width:0%; background:#333; transition: width .25s; }
    .muted { color:#666; }
    .result { font-weight:700; font-size:1.15rem; }
    .grid { display:grid; gap:10px; }
    .dist-row { display:grid; grid-template-columns: 28px 1fr 64px; gap:10px; align-items:center; }
    .bar { height:12px; background:#e6e6e6; border-radius:999px; overflow:hidden; }
    .bar > span { display:block; height:100%; width:0%; background:#222; transition: width .35s; }
    .pill { border:1px solid #ccc; background:#fff; border-radius:999px; padding:10px 14px; cursor:pointer; }
    .pill:hover{ background:#f5f5f5; }
    .small { font-size:.92rem; color:#555; }
  </style>
</head>
<body>
  <h1>Religionstest – Etik, Existens & Rit/Livsstil</h1>
  <p class="sub">Välj det alternativ som bäst stämmer med hur du skulle göra/tänka. I slutet får du en texttolkning och en procentuell fördelning.</p>

  <div class="card">
    <div class="progress-wrap">
      <div class="muted" id="counter">Fråga 1/20</div>
      <div class="progress" aria-hidden="true"><span id="progress"></span></div>
    </div>
    <div id="quiz"></div>
  </div>

  <div id="resultCard" class="card" style="display:none;">
    <h2>Ditt resultat</h2>
    <p id="summary" class="result"></p>

    <h3>Fördelning</h3>
    <div class="grid" id="distribution"></div>

    <h3>Tolkning</h3>
    <div id="interpretation" class="small"></div>

    <div style="margin-top:12px; display:flex; gap:10px;">
      <button class="pill" onclick="restart()">Starta om</button>
      <button class="pill" onclick="window.scrollTo({top:0, behavior:'smooth'})">Till toppen</button>
    </div>
  </div>

  <script>
    // Profiler (etiketter används i lärarläge + resultat)
    const labels = { A:"Kristendom", B:"Buddhism", C:"Judendom", D:"Hinduism", E:"Islam" };

    const descriptions = {
      A: "Kristen etik: kärlek till nästan, förlåtelse och omsorg i praktiken.",
      B: "Buddhistisk etik: balans och icke-skadande; att inte dras med i ilska eller begär.",
      C: "Judisk etik: regler och ansvar kombinerat med samvetsprövning och gemenskap.",
      D: "Hinduisk etik: livet som en helhetlig väg; handlingars följder över tid och inre fördjupning.",
      E: "Islamisk etik: plikt, rättvisa och tydliga ramar; avsikt och disciplin i vardagen."
    };

    // 20 frågor – Etik (1–5), Existens (6–10), Rit/Livsstil (11–20)
    const questions = [
      // --- Etik ---
      { q: "1. Du ser en klasskompis bli retad i korridoren. Vad gör du?",
        options: [
          { text: "Ingriper och står upp för personen där och då.", scores: ["A","E"] },
          { text: "Försöker lugna alla och styra undan från mer skada.", scores: ["B","D"] },
          { text: "Hämtar en vuxen och följer skolans rutiner.", scores: ["C","E"] }
        ]},
      { q: "2. En vän har fuskat på provet och ber dig vara tyst.",
        options: [
          { text: "Säger ifrån – fel ska rättas, men med respekt för personen.", scores: ["C","E","A"] },
          { text: "Pratar privat för att få vännen att rätta till utan bråk.", scores: ["B","D"] }
        ]},
      { q: "3. Du hittar en plånbok med kontanter i uppehållsrummet.",
        options: [
          { text: "Lämnar in den direkt till expeditionen.", scores: ["A","E"] },
          { text: "Letar upp ägaren om du kan, annars lämnar in den.", scores: ["C","A"] },
          { text: "Rör den inte – vill inte bära följderna av fel beslut.", scores: ["B","D"] }
        ]},
      { q: "4. En kollega skyller på dig inför gruppen för något du inte gjort.",
        options: [
          { text: "Säger ifrån sakligt inför gruppen – rätt ska vara rätt.", scores: ["C","E"] },
          { text: "Markerar tydligt men visar vilja till försoning.", scores: ["A"] },
          { text: "Backar för stunden för att undvika konflikt, tar det senare.", scores: ["B","D"] }
        ]},
      { q: "5. En vän vill att du ljuger för att skydda hen i en känslig situation.",
        options: [
          { text: "Avböjer – sanning och ansvar går före.", scores: ["C","E","A"] },
          { text: "Söker en lösning som minskar lidande utan att ljuga.", scores: ["B","D"] }
        ]},

      // --- Existens ---
      { q: "6. Du går igenom en längre period av motgångar. Hur ser du på det?",
        options: [
          { text: "Som en prövning som kräver uthållighet och disciplin.", scores: ["E"] },
          { text: "Som något att förstå och växa av på sikt.", scores: ["B"] },
          { text: "Som något där gemenskap och omsorg ger mening.", scores: ["A"] },
          { text: "Som en del av en större livsväg över tid.", scores: ["D"] },
          { text: "Som ett läge för samvetsprövning och kloka val.", scores: ["C"] }
        ]},
      { q: "7. Någon behandlar dig illa. Vad blir ditt första val?",
        options: [
          { text: "Söker rättvis upprättelse på ett ordnat sätt.", scores: ["C","E"] },
          { text: "Förlåter och försöker återupprätta relationen.", scores: ["A"] },
          { text: "Tar avstånd för att undvika mer skada och bråk.", scores: ["B","D"] }
        ]},
      { q: "8. Du ser en tydlig orättvisa i samhället. Vad gör du?",
        options: [
          { text: "Agerar inom tydliga ramar för att främja rättvisa för fler.", scores: ["E","C"] },
          { text: "Gör konsekventa små goda handlingar i vardagen.", scores: ["B","A"] },
          { text: "Arbetar långsiktigt utifrån en helhetssyn.", scores: ["D"] }
        ]},
      { q: "9. Du funderar på vad som händer efter döden. Vad ligger närmast?",
        options: [
          { text: "Ett kommande liv bortom detta.", scores: ["A","E"] },
          { text: "Återfödelse och cykler.", scores: ["B","D"] },
          { text: "Fokusera på livet här och nu och hur vi lever det väl.", scores: ["C"] }
        ]},
      { q: "10. Hur beskriver du människans innersta natur?",
        options: [
          { text: "I grunden god men behöver vägledning och förlåtelse.", scores: ["A"] },
          { text: "Formbar – begär kan övervinnas genom träning och insikt.", scores: ["B"] },
          { text: "Bunden till ansvar och bud; vägleds av lag och samvete.", scores: ["C","E"] },
          { text: "En del av något större; en inre kärna kan fördjupas.", scores: ["D"] }
        ]},

      // --- Rit & livsstil ---
      { q: "11. Du bjuds på fest samma dag som du brukar hålla helig vilodag.",
        options: [
          { text: "Avstår – helgdagen går först.", scores: ["C","E"] },
          { text: "Deltar en kort stund men lämnar i tid.", scores: ["A"] },
          { text: "Väljer stillhet och egen praxis den dagen.", scores: ["B","D"] }
        ]},
      { q: "12. Du blir bjuden på mat som inte följer dina vanor/restriktioner.",
        options: [
          { text: "Avstår om det bryter mot viktiga regler.", scores: ["C","E"] },
          { text: "Äter lite för att visa gemenskap och omtanke.", scores: ["A"] },
          { text: "Väljer balans – maten är sekundär till sinnesro.", scores: ["B","D"] }
        ]},
      { q: "13. En släkting vill att du deltar i en tradition du inte känner dig hemma i.",
        options: [
          { text: "Deltar för gemenskapens skull – relationen är viktig.", scores: ["A"] },
          { text: "Avstår om samvetet säger nej.", scores: ["C"] },
          { text: "Deltar om det kan ske inom ramar du kan stå för.", scores: ["E"] },
          { text: "Deltar delvis på ett sätt som känns sant och stilla.", scores: ["B","D"] }
        ]},
      { q: "14. Varför fastar/avstår du (om du gör det)?",
        options: [
          { text: "Disciplin och lydnad stärker mig.", scores: ["E"] },
          { text: "För att minnas och respektera traditionen och dess vishet.", scores: ["C"] },
          { text: "För att öva tålamod och balans i livet.", scores: ["B","D"] },
          { text: "För att påminnas om andras behov och visa omsorg.", scores: ["A"] }
        ]},
      { q: "15. Du ska ge en gåva/bidrag. Vad prioriterar du?",
        options: [
          { text: "Välgörenhet och behövande i samhället.", scores: ["A","E"] },
          { text: "Gemenskapen/föreningen där du hör hemma.", scores: ["C"] },
          { text: "Något långsiktigt som bygger helhet och mening.", scores: ["D"] },
          { text: "Att träna bort själviskhet genom givande.", scores: ["B"] }
        ]},
      { q: "16. Någon frågar varför du ber/mediterar.",
        options: [
          { text: "För att hålla kontakt och riktning i det heliga.", scores: ["A","E","C"] },
          { text: "För att träna sinnet i stillhet och insikt.", scores: ["B","D"] }
        ]},
      { q: "17. Hur tänker du kring klädsel i skolan/arbetsplatsen?",
        options: [
          { text: "Väljer det som visar respekt och blygsamhet.", scores: ["E","C"] },
          { text: "Uttrycker mig själv men med ansvar och omtanke.", scores: ["A"] },
          { text: "Väljer enkelt för att inte mata begär/självhävdelse.", scores: ["B","D"] }
        ]},
      { q: "18. Hur förhåller du dig till vilodag/helg?",
        options: [
          { text: "Vilar enligt bud och ordning.", scores: ["C","E"] },
          { text: "Vilar för relationer och för att minnas kärleken.", scores: ["A"] },
          { text: "Vilar som del av balans och harmoni.", scores: ["B","D"] }
        ]},
      { q: "19. Vilken aktivitet väljer du för inre styrka?",
        options: [
          { text: "Bön i ordnade former, ensam eller tillsammans.", scores: ["E","C"] },
          { text: "Meditation och tystnad.", scores: ["B","D"] },
          { text: "Bön och sång/gemenskap.", scores: ["A"] }
        ]},
      { q: "20. Du står inför ett viktigt beslut. Vad är din metod?",
        options: [
          { text: "Söker råd i bud/texter och följer ramarna.", scores: ["C","E"] },
          { text: "Lyssnar till hjärtat och är beredd att förlåta felsteg.", scores: ["A"] },
          { text: "Väljer det som minskar lidande och ökar balans.", scores: ["B"] },
          { text: "Väljer det som bäst passar livets helhet och riktning.", scores: ["D"] }
        ]}
    ];

    let scores, current;

    function initState(){
      scores = { A:0, B:0, C:0, D:0, E:0 };
      current = 0;
      updateCounter(); updateProgress();
    }
    function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]];} return arr; }
    function updateCounter(){ document.getElementById("counter").textContent = `Fråga ${Math.min(current+1, questions.length)}/${questions.length}`; }
    function updateProgress(){ document.getElementById("progress").style.width = Math.round((current/questions.length)*100) + "%"; }

    function showQuestion(){
      if(current>=questions.length){ return showResult(); }
      const container = document.getElementById("quiz");
      container.innerHTML = "";
      const wrap = document.createElement("div");
      wrap.className = "question";
      wrap.innerHTML = `<h3>${questions[current].q}</h3>`;
      const opts = document.createElement("div"); opts.className="options";
      shuffle([...questions[current].options]).forEach(opt=>{
        const btn = document.createElement("button");
        btn.className="btn"; btn.textContent = opt.text;

        // Dold etikett för lärarläge
        const label = document.createElement("div");
        label.className = "hidden-label";
        label.textContent = "➜ " + (opt.scores.map(k=>labels[k]).join(", ") || "Ger inga poäng");

        const box = document.createElement("div");
        box.appendChild(btn); box.appendChild(label);

        btn.onclick = ()=>{
          (opt.scores||[]).forEach(k=>{ if(scores[k]!=null) scores[k]++; });
          current++; updateCounter(); updateProgress(); showQuestion();
        };
        opts.appendChild(box);
      });
      wrap.appendChild(opts); container.appendChild(wrap);
    }

    function showResult(){
      // Byt ut quizet och visa resultatkortet
      document.getElementById("quiz").innerHTML = `<p class="muted">Klart! Se resultatet nedan.</p>`;
      const total = Object.values(scores).reduce((a,b)=>a+b,0)||1;
      const pct = Object.fromEntries(Object.entries(scores).map(([k,v])=>[k, Math.round((v/total)*100)]));

      const maxVal = Math.max(...Object.values(scores));
      const top = Object.keys(scores).filter(k=>scores[k]===maxVal);

      // Topptext
      const titleList = top.map(k=>labels[k]).join(" & ");
      document.getElementById("summary").textContent = `Du lutar mest åt: ${titleList}`;

      // Fördelningsstaplar
      const dist = document.getElementById("distribution"); dist.innerHTML="";
      ["A","B","C","D","E"].forEach(k=>{
        const row = document.createElement("div"); row.className="dist-row";
        const label = document.createElement("div"); label.textContent = k;
        const bar = document.createElement("div"); bar.className="bar";
        const fill = document.createElement("span"); fill.style.width = pct[k]+"%"; bar.appendChild(fill);
        const val = document.createElement("div"); val.textContent = pct[k]+"%";
        row.appendChild(label); row.appendChild(bar); row.appendChild(val);
        dist.appendChild(row);
      });

      // Tolkning: topp-profiler + 1–2 närmast följande
      const interp = document.getElementById("interpretation");
      let lines = [];
      top.forEach(k => lines.push(`• ${labels[k]}: ${descriptions[k]}`));
      const others = Object.keys(scores).filter(k=>!top.includes(k)).sort((a,b)=>scores[b]-scores[a]).slice(0,2);
      if(others.length){
        lines.push("<br/>Nära profiler:");
        others.forEach(k => lines.push(`• ${labels[k]}: ${descriptions[k]}`));
      }
      interp.innerHTML = lines.join("<br/>");

      document.getElementById("resultCard").style.display = "block";
      setTimeout(()=>document.getElementById("resultCard").scrollIntoView({behavior:"smooth"}),100);
    }

    function restart(){
      initState();
      document.getElementById("resultCard").style.display="none";
      document.getElementById("quiz").innerHTML = "";
      showQuestion(); window.scrollTo({top:0, behavior:"smooth"});
    }

    // Lärarläge: tryck L för att toggla etiketter
    document.addEventListener("keydown", e=>{
      if(e.key && e.key.toLowerCase()==="l"){
        document.body.classList.toggle("show-labels");
      }
    });

    // Init
    initState(); showQuestion();
  </script>
</body>
</html>
